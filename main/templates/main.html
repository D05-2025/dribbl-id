{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>DRIBBL.ID</title>
<style>
    /* Minimal style block for just the typing cursor 
      and the fade-in animation class.
    */
    .cursor {
        display: inline-block;
        width: 3px; /* A bit cleaner */
        height: 2.5rem; /* Default, script will adjust */
        background-color: #fff;
        margin-left: 4px;
        animation: blink 0.75s step-end infinite;
        vertical-align: bottom; /* Aligns better with text */
    }

    @keyframes blink {
        50% { opacity: 0; }
    }

    /* Simple class for the script to add */
    .fade-in-p {
        opacity: 1;
        transition: opacity 1.5s ease;
    }
</style>
{% endblock meta %}

{% block content %}
<!-- 
  This section is now built with Tailwind.
  min-h-[calc(100vh-4rem)] ensures it fills the viewport 
  below the 4rem (h-16) navbar from base.html.
-->
<div class="flex items-center justify-center min-h-[calc(100vh-4rem)] bg-black text-white px-6 py-16 sm:py-24">
    
    <!-- 
      Mobile-first: flex-col (stacked)
      Large screens: lg:flex-row (side-by-side)
    -->
    <div class="flex flex-col lg:flex-row items-center justify-center gap-12 lg:gap-20 max-w-7xl mx-auto">
        
        <!-- 
          Image 
          - Order 1 (top) on mobile.
          - Better sizing: w-3/4 on mobile, scales up to lg:w-[500px].
        -->
        <div class="flex-shrink-0 order-1">
            <img src="{% static 'images/basketball.png' %}" alt="Basketball" 
                 class="w-3/4 sm:w-1/2 lg:w-[500px] xl:w-[600px] h-auto mx-auto filter drop-shadow-[0_0_25px_rgba(255,255,255,0.2)]">
        </div>

        <!-- 
          Text
          - Order 2 (bottom) on mobile.
          - text-center on mobile, lg:text-left on large screens.
        -->
        <div class="order-2 text-center lg:text-left">
            <!-- 
              Title for typing animation 
              - Responsive font size: text-4xl (mobile) -> sm:text-5xl -> lg:text-6xl
            -->
            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold lowercase">
                <span class="type-title"></span><span class="cursor"></span>
            </h1>
            
            <!-- 
              Paragraph
              - Starts with opacity-0 (invisible).
              - Script will add 'fade-in-p' class to fade it in.
            -->
            <p id="hero-description" class="text-lg text-gray-300 mt-6 max-w-lg opacity-0">
                Indonesia's biggest basketball community! A place where passion meets the court, and every dribble, dunk, and dream matters.
            </p>
        </div>

    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const titleText = "welcome to dribbl.id";
        const titleElement = document.querySelector(".type-title");
        const cursor = document.querySelector(".cursor");
        const description = document.getElementById("hero-description");
        let i = 0;

        // Function to dynamically set cursor height based on the title's line height
        function updateCursorHeight() {
            if (!titleElement.parentElement || !cursor) return;
            // Get the computed style of the parent H1 tag
            const titleStyle = window.getComputedStyle(titleElement.parentElement);
            const titleFontSize = parseInt(titleStyle.fontSize, 10);
            
            // Set cursor height to match the actual font size for better alignment
            cursor.style.height = `${titleFontSize}px`;
        }

        function typeEffect() {
            if (i < titleText.length) {
                titleElement.textContent = titleText.substring(0, i + 1);
                i++;
                setTimeout(typeEffect, 100);
            } else {
                // Typing is finished
                if (description) {
                    // Explicitly remove opacity-0 and add fade-in class
                    description.classList.remove('opacity-0');
                    description.classList.add('fade-in-p');
                }
            }
        }

        // Initial setup
        updateCursorHeight();
        typeEffect();

        // Adjust cursor height on window resize in case font size changes
        window.addEventListener('resize', updateCursorHeight);
    });
</script>
{% endblock content %}